module:
  schema: "public"
  table: "contracts"
  identifier: "contracts"
  label: "State Contracts"
  description: "NYS state contracts with vendors including amounts, dates, and descriptions"

  dimensions:
    - column: "vendor_name"
      type: "categorical"
      label: "Vendor"
      description: "Vendor or contractor name"

    - column: "department_facility"
      type: "categorical"
      label: "Department"
      description: "Department or facility"

    - column: "contract_number"
      type: "categorical"
      label: "Contract Number"
      description: "Contract identifier"

    - column: "contract_type"
      type: "categorical"
      label: "Contract Type"
      description: "Type of contract"

    - column: "contract_start_date"
      type: "categorical"
      label: "Start Date"
      description: "Contract start date"

    - column: "contract_end_date"
      type: "categorical"
      label: "End Date"
      description: "Contract end date"

  metrics:
    - identifier: "total_contracts"
      name: "Total Contracts"
      description: "Total number of state contracts"
      calculation: "custom-value"
      sql_expression: "COUNT(*)"
      time: "contracts.created_at"
      dimensions:
        - "this.*"

    - identifier: "total_contract_value"
      name: "Total Contract Value"
      description: "Sum of all current contract amounts"
      calculation: "custom-value"
      sql_expression: "SUM(current_contract_amount)"
      time: "contracts.created_at"
      dimensions:
        - "this.*"

    - identifier: "avg_contract_value"
      name: "Average Contract Value"
      description: "Average current contract amount"
      calculation: "custom-value"
      sql_expression: "AVG(current_contract_amount)"
      time: "contracts.created_at"
      dimensions:
        - "this.*"

    - identifier: "unique_vendors"
      name: "Unique Vendors"
      description: "Number of distinct vendors"
      calculation: "custom-value"
      sql_expression: "COUNT(DISTINCT vendor_name)"
      time: "contracts.created_at"
      dimensions:
        - "this.*"
